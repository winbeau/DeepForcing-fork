# Deep Forcing è®ºæ–‡å¤ç°æŒ‡å—

## âš ï¸ å½“å‰çŠ¶æ€

**é‡è¦æç¤ºï¼š** æˆªè‡³ç›®å‰ï¼ˆ2025å¹´12æœˆï¼‰ï¼Œè¯¥ä»“åº“ä»…åŒ…å«é¡¹ç›®å±•ç¤ºç½‘é¡µï¼Œ**å®ç°ä»£ç å°šæœªå‘å¸ƒ**ã€‚

- âœ… é¡¹ç›®ç½‘é¡µï¼šhttps://cvlab-kaist.github.io/DeepForcing/
- âœ… GitHubä»“åº“ï¼šhttps://github.com/cvlab-kaist/DeepForcing.git
- âŒ è®ºæ–‡ï¼šæ ‡æ³¨ä¸º"arXiv 2025"ï¼Œä½†å…·ä½“arXivé“¾æ¥æš‚æœªå…¬å¼€
- âŒ ä»£ç ï¼šREADMEæ˜¾ç¤º"Coming Soon!"
- âŒ å‘å¸ƒæ—¶é—´ï¼šæš‚æ— æ˜ç¡®æ—¶é—´è¡¨

## ğŸ“‹ è®ºæ–‡æ¦‚è¿°

**æ ‡é¢˜ï¼š** Deep Forcing: Training-Free Long Video Generation with Deep Sink and Participative Compression

**æœºæ„ï¼š** KAIST AI

**æ ¸å¿ƒåˆ›æ–°ï¼š**
1. **Deep Sinkï¼ˆæ·±åº¦æ³¨æ„åŠ›é”šç‚¹ï¼‰** - ä¿æŒçº¦50%çš„KVç¼“å­˜ä½œä¸ºæ³¨æ„åŠ›é”šç‚¹ï¼Œé…åˆæ—¶åºRoPEè°ƒæ•´ï¼Œç¡®ä¿é”šç‚¹å¸§ä¸å½“å‰å¸§ä¹‹é—´çš„æ—¶åºè¿è´¯æ€§
2. **Participative Compressionï¼ˆå‚ä¸å¼å‹ç¼©ï¼‰** - é€šè¿‡è®¡ç®—æœ€è¿‘å¸§çš„æ³¨æ„åŠ›åˆ†æ•°é€‰æ‹©æ€§å‰ªæå†—ä½™tokenï¼Œä»…ä¿ç•™Top-Cæœ€ç›¸å…³çš„token

**ä¸»è¦æˆæœï¼š**
- å®ç°è¶…è¿‡12å€çš„é•¿åº¦å¤–æ¨ï¼ˆ5ç§’ â†’ 60ç§’ä»¥ä¸Šï¼‰
- æ— éœ€å¾®è°ƒçš„è®­ç»ƒè‡ªç”±æ¡†æ¶
- ä¿æŒå®æ—¶æµå¼ç”Ÿæˆèƒ½åŠ›
- åœ¨å›¾åƒè´¨é‡å’Œç¾å­¦è´¨é‡ä¸Šä¼˜äºè®­ç»ƒå‹æ–¹æ³•

## ğŸ” ç›¸å…³å·¥ä½œå‚è€ƒ

åœ¨ç­‰å¾…Deep Forcingä»£ç å‘å¸ƒæœŸé—´ï¼Œå¯ä»¥ç ”ç©¶ä»¥ä¸‹ç›¸å…³å·¥ä½œï¼š

### 1. Self-Forcing (NeurIPS 2025 Spotlight)
- **GitHub:** https://github.com/guandeh17/Self-Forcing
- **arXiv:** 2506.08009
- **ç‰¹ç‚¹ï¼š** é€šè¿‡åœ¨è®­ç»ƒæ—¶æ¡ä»¶åŒ–å…ˆå‰è‡ªç”Ÿæˆçš„è¾“å‡ºæ¥è§£å†³æš´éœ²åå·®é—®é¢˜
- **æ€§èƒ½ï¼š** åœ¨å•GPUä¸Šå®ç°äºšç§’çº§å»¶è¿Ÿçš„å®æ—¶æµå¼è§†é¢‘ç”Ÿæˆ

### 2. Rolling Forcing
- **arXiv:** 2509.25161
- **é¡¹ç›®é¡µï¼š** https://kunhao-liu.github.io/Rolling_Forcing_Webpage/
- **ç‰¹ç‚¹ï¼š** è”åˆå»å™ªæ–¹æ¡ˆã€æ³¨æ„åŠ›é”šç‚¹æœºåˆ¶ã€é«˜æ•ˆè®­ç»ƒç®—æ³•
- **åˆä½œæ–¹ï¼š** å—æ´‹ç†å·¥å¤§å­¦ & è…¾è®¯ARCå®éªŒå®¤

### 3. Self-Forcing++
- **é¡¹ç›®é¡µï¼š** https://self-forcing-plus-plus.github.io/
- **ç‰¹ç‚¹ï¼š** å¯ç”Ÿæˆé•¿è¾¾4åˆ†15ç§’çš„è§†é¢‘ï¼Œé•¿åº¦æ‰©å±•è¾¾20å€

## ğŸ’» ç¡¬ä»¶é…ç½®åˆ†æ

### ä½ çš„é…ç½®
- **å•å¡ï¼š** 48GB L40 Ã— 1ï¼ˆå½“å‰Dockeré…ç½®ï¼‰
- **å¯ç”¨èµ„æºï¼š** 48GB L40 Ã— 4ï¼ˆæœåŠ¡å™¨æ€»é…ç½®ï¼‰

### é¢„ä¼°éœ€æ±‚ï¼ˆåŸºäºç›¸å…³å·¥ä½œæ¨æµ‹ï¼‰

æ ¹æ®Self-Forcingå’ŒRolling Forcingçš„ç»éªŒï¼š

**æ¨ç†é˜¶æ®µï¼š**
- **æœ€ä½é…ç½®ï¼š** å•å¼ 24GB GPUï¼ˆç”ŸæˆçŸ­è§†é¢‘ï¼Œå¦‚5-10ç§’ï¼‰
- **æ¨èé…ç½®ï¼š** å•å¼ 48GB GPUï¼ˆç”Ÿæˆ60ç§’è§†é¢‘ï¼‰
- **ä½ çš„48GB L40å®Œå…¨æ»¡è¶³æ¨ç†éœ€æ±‚** âœ…

**è®­ç»ƒé˜¶æ®µï¼ˆå¦‚æœDeep Forcingéœ€è¦è®­ç»ƒï¼‰ï¼š**
- å¯èƒ½éœ€è¦å¤šå¡å¹¶è¡Œ
- å…·ä½“éœ€æ±‚å–å†³äºåŸºç¡€æ¨¡å‹é€‰æ‹©ï¼ˆCogVideoXã€Mochiç­‰ï¼‰

### L40æ€§èƒ½ç‰¹ç‚¹
- æ¶æ„ï¼šAda Lovelace
- æ˜¾å­˜ï¼š48GB GDDR6 with ECC
- è®¡ç®—èƒ½åŠ›ï¼šé€‚åˆæ¨ç†å’Œè®­ç»ƒ
- ä¸A100ç›¸æ¯”ï¼šæ˜¾å­˜å¸¦å®½è¾ƒä½ï¼Œä½†å¯¹äºè§†é¢‘ç”Ÿæˆä»»åŠ¡è¶³å¤Ÿ

## ğŸ› ï¸ å‡†å¤‡å·¥ä½œ

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
conda create -n deepforcing python=3.10
conda activate deepforcing

# å®‰è£…PyTorchï¼ˆCUDA 12.1ç‰ˆæœ¬ï¼Œæ ¹æ®ä½ çš„CUDAç‰ˆæœ¬è°ƒæ•´ï¼‰
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# å¸¸ç”¨ä¾èµ–ï¼ˆæ ¹æ®ç›¸å…³å·¥ä½œæ¨æµ‹ï¼‰
pip install diffusers transformers accelerate
pip install opencv-python pillow imageio imageio-ffmpeg
pip install einops timm
pip install wandb tensorboard
```

### 2. å¯èƒ½çš„åŸºç¡€æ¨¡å‹

Deep Forcingä½œä¸ºè®­ç»ƒè‡ªç”±æ–¹æ³•ï¼Œå¯èƒ½åŸºäºä»¥ä¸‹æ¨¡å‹ä¹‹ä¸€ï¼š

**CogVideoXç³»åˆ—ï¼š**
```bash
# éœ€è¦çº¦26GBæ˜¾å­˜ï¼ˆCogVideoX-5Bï¼‰
huggingface-cli download THUDM/CogVideoX-5b
```

**Mochiï¼š**
```bash
# éœ€è¦çº¦35GBæ˜¾å­˜
huggingface-cli download genmo/mochi-1-preview
```

**Hunyuan Videoï¼š**
```bash
# éœ€è¦æ›´å¤§æ˜¾å­˜
huggingface-cli download tencent/HunyuanVideo
```

**å»ºè®®ï¼š** å…ˆå‡†å¤‡CogVideoX-5Bï¼Œ48GB L40å¯ä»¥æµç•…è¿è¡Œ

### 3. æ•°æ®é›†å‡†å¤‡ï¼ˆå¦‚éœ€è®­ç»ƒæˆ–æµ‹è¯•ï¼‰

å¯èƒ½ç”¨åˆ°çš„æ•°æ®é›†ï¼š
- **Panda-70M** - å¤§è§„æ¨¡è§†é¢‘å­—å¹•æ•°æ®é›†
- **WebVid-10M** - æ–‡æœ¬-è§†é¢‘å¯¹æ•°æ®é›†
- **UCF-101 / Kinetics** - æ ‡å‡†è§†é¢‘æµ‹è¯•é›†

### 4. ç›‘æ§ä»£ç ä»“åº“

```bash
# æ·»åŠ GitHubä»“åº“åˆ°watchåˆ—è¡¨
cd /workspace/Projects/DeepForcing-fork
git remote -v

# å®šæœŸæ‹‰å–æ›´æ–°
git fetch origin
git pull origin master
```

### 5. å­¦ä¹ ç›¸å…³ä»£ç åº“

åœ¨ç­‰å¾…æœŸé—´ï¼Œå»ºè®®å­¦ä¹ ï¼š

```bash
# å…‹éš†Self-Forcingï¼ˆå·²å¼€æºï¼‰
git clone https://github.com/guandeh17/Self-Forcing.git
cd Self-Forcing

# ç ”ç©¶å…¶KVç¼“å­˜æœºåˆ¶å’Œæµå¼ç”Ÿæˆå®ç°
# è¿™å¯¹ç†è§£Deep Forcingçš„Deep Sinkæœºåˆ¶å¾ˆæœ‰å¸®åŠ©
```

## ğŸ“Š é¢„æœŸå¤ç°æ­¥éª¤ï¼ˆä»£ç å‘å¸ƒåï¼‰

åŸºäºé¡¹ç›®é¡µé¢ä¿¡æ¯ï¼Œé¢„æœŸçš„ä½¿ç”¨æµç¨‹ï¼š

### æ¨ç†é˜¶æ®µ

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¯èƒ½ï¼‰
python download_models.py

# 3. åŸºç¡€è§†é¢‘ç”Ÿæˆï¼ˆ5ç§’ï¼‰
python inference.py \
  --prompt "A stylish woman strolls down a bustling Tokyo street..." \
  --duration 5 \
  --output outputs/tokyo_5s.mp4

# 4. é•¿è§†é¢‘ç”Ÿæˆï¼ˆ60ç§’ï¼‰- ä½¿ç”¨Deep Forcing
python inference.py \
  --prompt "A stylish woman strolls down a bustling Tokyo street..." \
  --duration 60 \
  --use_deep_sink \
  --sink_size 15 \  # æ ¹æ®é¡¹ç›®é¡µé¢ï¼Œæœ€ä½³sink sizeä¸º12-14å¸§
  --use_participative_compression \
  --compression_top_c 50 \
  --output outputs/tokyo_60s.mp4

# 5. æ¶ˆèç ”ç©¶ - ä»…Deep Sink
python inference.py \
  --prompt "..." \
  --duration 30 \
  --use_deep_sink \
  --sink_size 12 \
  --output outputs/ablation_ds.mp4

# 6. æ¶ˆèç ”ç©¶ - Deep Sink + Participative Compression
python inference.py \
  --prompt "..." \
  --duration 30 \
  --use_deep_sink \
  --use_participative_compression \
  --output outputs/ablation_full.mp4
```

### å…³é”®å‚æ•°è¯´æ˜

æ ¹æ®é¡¹ç›®é¡µé¢çš„æ¶ˆèç ”ç©¶ï¼š

**Sink Sizeï¼ˆé”šç‚¹å¸§æ•°é‡ï¼‰ï¼š**
- `0` - æ— é”šç‚¹ï¼Œè´¨é‡é€€åŒ–ä¸¥é‡
- `4` - é”šç‚¹è¿‡å°ï¼Œä»æœ‰æ˜æ˜¾é€€åŒ–
- `9` - ä¸­ç­‰é”šç‚¹ï¼Œè´¨é‡æ”¹å–„
- `12-14` - **æœ€ä½³èŒƒå›´**ï¼Œå‡å°‘é€€åŒ–å’Œç¾å­¦æ¼‚ç§»
- `18` - é”šç‚¹è¿‡å¤§ï¼Œå¯¼è‡´è¿‡åº¦ä¿ç•™å’Œé‡å¤

**å»ºè®®é…ç½®ï¼š**
```python
# 30ç§’è§†é¢‘
sink_size = 12

# 60ç§’è§†é¢‘
sink_size = 14-15

# è®¡ç®—æ–¹å¼ï¼šçº¦ä¿æŒ40-50%çš„å¸§ä½œä¸ºé”šç‚¹
# ä¾‹å¦‚ï¼š30ç§’@8fps = 240å¸§ï¼Œsink_size=12 å³ 120å¸§é”šç‚¹(50%)
```

## ğŸ§ª æµ‹è¯•ä¸è¯„ä¼°

### 1. å®šæ€§è¯„ä¼°

ä½¿ç”¨é¡¹ç›®é¡µé¢ä¸­çš„æç¤ºè¯è¿›è¡Œæµ‹è¯•ï¼š

```python
test_prompts = [
    # åŸå¸‚åœºæ™¯
    "A stylish woman strolls down a bustling Tokyo street, the warm glow of neon lights...",

    # è‡ªç„¶åœºæ™¯
    "A dramatic, epic fantasy-style illustration depicting a towering, giant cloud shaped like a man...",

    # åŠ¨æ€åœºæ™¯
    "A dramatic and dynamic scene in the style of a disaster movie, depicting a powerful tsunami...",

    # ç‰¹å†™åœºæ™¯
    "A close-up shot of a Victoria crowned pigeon in a naturalistic wildlife photography style...",
]
```

### 2. å®šé‡è¯„ä¼°

å¯èƒ½çš„è¯„ä¼°æŒ‡æ ‡ï¼š
- **VBench-Long** - é•¿è§†é¢‘ç”ŸæˆåŸºå‡†æµ‹è¯•
- **FVD (FrÃ©chet Video Distance)** - è§†é¢‘è´¨é‡è¯„ä¼°
- **Temporal Consistency** - æ—¶åºä¸€è‡´æ€§
- **Aesthetic Score** - ç¾å­¦è¯„åˆ†

### 3. æ€§èƒ½ç›‘æ§

```bash
# ç›‘æ§GPUä½¿ç”¨
nvidia-smi -l 1

# ä½¿ç”¨å·¥å…·è®°å½•æ€§èƒ½
pip install gpustat
gpustat -i 1
```

## ğŸ“ˆ ä¼˜åŒ–å»ºè®®

### å•å¡ä¼˜åŒ–ï¼ˆ48GB L40ï¼‰

```python
# å¯èƒ½çš„ä¼˜åŒ–é€‰é¡¹
config = {
    "mixed_precision": "fp16",  # æˆ– "bf16"
    "enable_xformers": True,    # å†…å­˜é«˜æ•ˆçš„attention
    "enable_vae_slicing": True, # VAEåˆ‡ç‰‡å‡å°‘æ˜¾å­˜
    "enable_vae_tiling": True,  # VAEåˆ†å—å¤„ç†
}
```

### å¤šå¡å¹¶è¡Œï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
# ä½¿ç”¨accelerateè¿›è¡Œå¤šGPUæ¨ç†
accelerate config

# è¿è¡Œåˆ†å¸ƒå¼æ¨ç†
accelerate launch --multi_gpu --num_processes 4 inference.py \
  --prompt "..." \
  --duration 60
```

## ğŸ”— æœ‰ç”¨èµ„æº

### æ–‡æ¡£å’Œæ•™ç¨‹
- [Diffusersæ–‡æ¡£](https://huggingface.co/docs/diffusers)
- [CogVideoXæ–‡æ¡£](https://github.com/THUDM/CogVideo)
- [Self-Forcingè®ºæ–‡](https://arxiv.org/abs/2506.08009)
- [Rolling Forcingè®ºæ–‡](https://arxiv.org/abs/2509.25161)

### ç¤¾åŒº
- KAIST CV Lab: https://cvlab.kaist.ac.kr
- Hugging Face Diffusers: https://github.com/huggingface/diffusers

## ğŸ“ è®°å½•ä¸å®éªŒè¿½è¸ª

å»ºè®®ä½¿ç”¨å®éªŒè¿½è¸ªå·¥å…·ï¼š

```python
# ä½¿ç”¨Weights & Biases
import wandb

wandb.init(project="deepforcing-reproduction")
wandb.config.update({
    "sink_size": 14,
    "compression_top_c": 50,
    "duration": 60,
    "base_model": "CogVideoX-5B"
})
```

## â“ å¸¸è§é—®é¢˜é¢„æœŸ

### Q1: OOM (Out of Memory) é”™è¯¯
**è§£å†³æ–¹æ¡ˆï¼š**
- å¯ç”¨æ··åˆç²¾åº¦ (`fp16/bf16`)
- å¯ç”¨VAE slicingå’Œtiling
- å‡å°batch size
- å‡å°‘sink sizeï¼ˆä½†å¯èƒ½å½±å“è´¨é‡ï¼‰

### Q2: ç”Ÿæˆè´¨é‡ä¸ä½³
**æ£€æŸ¥é¡¹ï¼š**
- Sink sizeæ˜¯å¦åœ¨12-14èŒƒå›´å†…
- æ˜¯å¦åŒæ—¶å¯ç”¨Deep Sinkå’ŒParticipative Compression
- åŸºç¡€æ¨¡å‹æ˜¯å¦æ­£ç¡®åŠ è½½
- æç¤ºè¯æ˜¯å¦è¶³å¤Ÿè¯¦ç»†

### Q3: ç”Ÿæˆé€Ÿåº¦æ…¢
**ä¼˜åŒ–æ–¹å‘ï¼š**
- ä½¿ç”¨æ›´å°‘çš„æ¨ç†æ­¥æ•°
- å¯ç”¨xformersæˆ–flash attention
- ä½¿ç”¨è’¸é¦æ¨¡å‹ï¼ˆå¦‚æœå¯ç”¨ï¼‰

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **æŒç»­ç›‘æ§** - æ¯å¤©æ£€æŸ¥GitHubä»“åº“å’Œä½œè€…ç¤¾äº¤åª’ä½“
2. **å‡†å¤‡ç¯å¢ƒ** - æå‰é…ç½®å¥½Pythonç¯å¢ƒå’Œä¾èµ–
3. **å­¦ä¹ ç›¸å…³å·¥ä½œ** - æ·±å…¥ç ”ç©¶Self-Forcingå’ŒRolling Forcingçš„ä»£ç 
4. **å‡†å¤‡æµ‹è¯•æ•°æ®** - æ”¶é›†æƒ³è¦æµ‹è¯•çš„è§†é¢‘ç”Ÿæˆæç¤ºè¯
5. **è”ç³»ä½œè€…** - å¯ä»¥é€šè¿‡GitHub Issuesç¤¼è²Œè¯¢é—®å‘å¸ƒæ—¶é—´

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœæœ‰ç´§è¿«éœ€æ±‚ï¼Œå¯ä»¥å°è¯•è”ç³»è®ºæ–‡ä½œè€…ï¼š
- GitHub: https://github.com/cvlab-kaist/DeepForcing/issues
- KAIST CV Lab: https://cvlab.kaist.ac.kr

---

**æœ€åæ›´æ–°ï¼š** 2025å¹´12æœˆ6æ—¥
**çŠ¶æ€ï¼š** ç­‰å¾…ä»£ç å‘å¸ƒ
**å‡†å¤‡ç¨‹åº¦ï¼š** ç¡¬ä»¶æ»¡è¶³ âœ… | ç¯å¢ƒå¯é…ç½® âœ… | ä»£ç æœªå‘å¸ƒ â³
